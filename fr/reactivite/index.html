<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Réactivité | Vue.js en profondeur</title>
    <meta name="description" content="Une formation d&#39;introduction à Vue.js">
    
    
    <link rel="preload" href="/vuejs-training/assets/css/0.styles.0095ce53.css" as="style"><link rel="preload" href="/vuejs-training/assets/js/app.b2f1ab06.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/2.bc4a2d9f.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/8.15a2f53e.js" as="script"><link rel="prefetch" href="/vuejs-training/assets/js/10.fc5fce30.js"><link rel="prefetch" href="/vuejs-training/assets/js/11.001f511d.js"><link rel="prefetch" href="/vuejs-training/assets/js/12.74660dd5.js"><link rel="prefetch" href="/vuejs-training/assets/js/13.d65f2323.js"><link rel="prefetch" href="/vuejs-training/assets/js/14.c6e4b6b1.js"><link rel="prefetch" href="/vuejs-training/assets/js/15.e5af265d.js"><link rel="prefetch" href="/vuejs-training/assets/js/16.6ece437c.js"><link rel="prefetch" href="/vuejs-training/assets/js/17.31beca0b.js"><link rel="prefetch" href="/vuejs-training/assets/js/18.182add32.js"><link rel="prefetch" href="/vuejs-training/assets/js/19.82392508.js"><link rel="prefetch" href="/vuejs-training/assets/js/20.c59fdf04.js"><link rel="prefetch" href="/vuejs-training/assets/js/21.32a2b576.js"><link rel="prefetch" href="/vuejs-training/assets/js/22.360b4a3b.js"><link rel="prefetch" href="/vuejs-training/assets/js/23.9bfee3c5.js"><link rel="prefetch" href="/vuejs-training/assets/js/24.674e674b.js"><link rel="prefetch" href="/vuejs-training/assets/js/25.03650b5d.js"><link rel="prefetch" href="/vuejs-training/assets/js/26.948b1351.js"><link rel="prefetch" href="/vuejs-training/assets/js/27.679b09ba.js"><link rel="prefetch" href="/vuejs-training/assets/js/28.618ce657.js"><link rel="prefetch" href="/vuejs-training/assets/js/29.1aefee6e.js"><link rel="prefetch" href="/vuejs-training/assets/js/3.75f23d10.js"><link rel="prefetch" href="/vuejs-training/assets/js/30.2bfb2fc1.js"><link rel="prefetch" href="/vuejs-training/assets/js/31.cb670649.js"><link rel="prefetch" href="/vuejs-training/assets/js/32.d6fcad52.js"><link rel="prefetch" href="/vuejs-training/assets/js/33.b883c3b1.js"><link rel="prefetch" href="/vuejs-training/assets/js/34.96c5b58e.js"><link rel="prefetch" href="/vuejs-training/assets/js/35.c774b4fc.js"><link rel="prefetch" href="/vuejs-training/assets/js/4.331d769c.js"><link rel="prefetch" href="/vuejs-training/assets/js/5.e3acd7a6.js"><link rel="prefetch" href="/vuejs-training/assets/js/6.9328b127.js"><link rel="prefetch" href="/vuejs-training/assets/js/7.11e7f726.js"><link rel="prefetch" href="/vuejs-training/assets/js/9.c387bc17.js">
    <link rel="stylesheet" href="/vuejs-training/assets/css/0.styles.0095ce53.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuejs-training/fr/" class="home-link router-link-active"><!----> <span class="site-name">Vue.js en profondeur</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Langue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/reactivite/" class="nav-link router-link-exact-active router-link-active">Français</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Langue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/reactivite/" class="nav-link router-link-exact-active router-link-active">Français</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vuejs-training/fr/" class="sidebar-link">Bienvenue</a></li><li><a href="/vuejs-training/fr/presentation/" class="sidebar-link">Présentation de Vue.js</a></li><li><a href="/vuejs-training/fr/outillage/" class="sidebar-link">Outillage</a></li><li><a href="/vuejs-training/fr/vues/" class="sidebar-link">Vues</a></li><li><a href="/vuejs-training/fr/directives/" class="sidebar-link">Directives</a></li><li><a href="/vuejs-training/fr/composants/" class="sidebar-link">Composants</a></li><li><a href="/vuejs-training/fr/reactivite/" class="active sidebar-link">Réactivité</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuejs-training/fr/reactivite/#getters-setters-ecmascript-5" class="sidebar-link">Getters / setters (ECMAScript 5)</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/fr/reactivite/#proxies-ecmascript-6" class="sidebar-link">Proxies (ECMAScript 6)</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/fr/reactivite/#detail-du-systeme-de-reactivite-de-vue" class="sidebar-link">Détail du système de réactivité de Vue</a></li></ul></li><li><a href="/vuejs-training/fr/etat/" class="sidebar-link">Gestion d'état</a></li><li><a href="/vuejs-training/fr/routage/" class="sidebar-link">Routage</a></li><li><a href="/vuejs-training/fr/http/" class="sidebar-link">Requêtes HTTP</a></li><li><a href="/vuejs-training/fr/tests/" class="sidebar-link">Tests unitaires</a></li><li><a href="/vuejs-training/fr/reusabilite/" class="sidebar-link">Réusabilité et composition</a></li><li><a href="/vuejs-training/fr/ecosysteme/" class="sidebar-link">Écosystème de Vue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reactivite"><a href="#reactivite" aria-hidden="true" class="header-anchor">#</a> Réactivité</h1> <p>La réactivité est le mécanisme qui permet au framework de détecter lorsque des données utilisées sur la page sont modifiées (<em>mutées</em>), et de mettre à jour la page de façon optimale. C'est donc une mécanique cruciale pour tout framework web, et il convient d'en analyser le fonctionnement pour comprendre ses forces et ses limites.</p> <p>Vue fournit une réactivité automatique, c'est-à-dire qu'il n'est pas nécessaire au développeur de déclencher manuellement la mise à jour de la vue après avoir muté des données. Cette réactivité est basée sur 2 fonctionnalités de JavaScript: les <strong>getters/setters</strong> et les <strong>Proxies</strong>.</p> <h2 id="getters-setters-ecmascript-5"><a href="#getters-setters-ecmascript-5" aria-hidden="true" class="header-anchor">#</a> Getters / setters (ECMAScript 5)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;joe&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;accès en lecture à la propriété&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> name
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;accès en écriture à la propriété&quot;</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>En JavaScript, les propriétés d'un objet peuvent être déclarées avec un getter et un setter, qui sont des fonctions exécutées à l'accès en lecture et écriture à cette propriété. Vue.js les utilise en redefinissant des getters/setters pour toutes les data et props des composants, de façon à identifier les consommateurs de ces données ainsi que le moment où celles-ci sont mises à jour.</p> <p>La principale limitation des getters/setters est qu'il faut connaître au préalable le nom des variables pour leur assigner un getter/setter. C'est la raison pour laquelle <strong>il est impératif de déclarer en data ou en props toutes les variables utilisées par un composant si on veut qu'elles soient réactives</strong>.</p> <p>Dans les cas particuliers où il n'est pas possible de déclarer une variable au préalable, comme par exemple un <code>Array</code> extensible de longueur indéfinie ou une <code>Map</code>, Vue propose la méthodes <code>Vue.set</code> ou <code>vm.$set</code> pour assigner une valeur à une propriété en forçant la réactivité.</p> <p><img src="/vuejs-training/assets/img/getters-setters.e7cbff81.jpg" alt="Principe de réactivité basé sur les getters/setters"></p> <h2 id="proxies-ecmascript-6"><a href="#proxies-ecmascript-6" aria-hidden="true" class="header-anchor">#</a> Proxies (ECMAScript 6)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> original_user <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;joe&quot;</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>original_user<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`accès en lecture à la propriété </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`accès en écriture à la propriété </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> avec la valeur </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Les Proxies sont une fonctionnalité récente de JavaScript apparue avec la spécification ES2015. Ils permettent de s'abstraire de toutes les limitations des getters/setters, en donnant un contrôle complet sur toutes les opérations permettant de manipuler un objet. Puisqu'ils ne sont pas supportés par les anciens navigateurs comme Internet Explorer, ils ne seront introduits totalement que dans Vue 3.0, dont la sortie est prévue fin 2019. Cela devrait résoudre la plupart des limitations actuelles de la réactivité dans Vue 2.</p> <h2 id="detail-du-systeme-de-reactivite-de-vue"><a href="#detail-du-systeme-de-reactivite-de-vue" aria-hidden="true" class="header-anchor">#</a> Détail du système de réactivité de Vue</h2> <p><img src="/vuejs-training/assets/img/vue-reactivity.f17088cf.jpg" alt="Schéma du système de réactivité de Vue"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vuejs-training/fr/composants/" class="prev">
          Composants
        </a></span> <span class="next"><a href="/vuejs-training/fr/etat/">
          Gestion d'état
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuejs-training/assets/js/app.b2f1ab06.js" defer></script><script src="/vuejs-training/assets/js/2.bc4a2d9f.js" defer></script><script src="/vuejs-training/assets/js/8.15a2f53e.js" defer></script>
  </body>
</html>
